const Bluebird = require('bluebird');
let AWS = require('aws-sdk');
AWS.config.setPromisesDependency(Bluebird);
let dynamodb = new AWS.DynamoDB({apiVersion: '2012-08-10'});
const _ = require('lodash');

class PicturesApi {
  async getPictures() {
    let params = {
      TableName: 'Pictures'
    }
    
    return dynamodb.scan(params).promise().then((data) => {
      const results = data.Items.map((item) => {
        return JSON.parse(_.get(item, 'data.S'));
      })
      
      return results;
    }).catch((error) => {
      console.log('LOGGING: PicturesApi -> getPictures -> error', error);
    });
  }
}

module.exports = PicturesApi